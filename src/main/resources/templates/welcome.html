<html>
<head>
    <title>Homework</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <!-- <script src="getRequest.js"></script> -->

    <script>
        $( document ).ready(function() {
            // GET REQUEST
            $("#firstForm").submit(function (event) {
                event.preventDefault();
                ajaxPost();
            });

            // DO POST
            function ajaxPost(){
                var data =$("#data").val();
                var userName =$("#username").val();
                var city = $("#city").val();
                var formData = {metaData:data,userName:userName,city:city};
                $.ajax({
                    type : "POST",
                    contentType : 'application/json',
                    url : "https://localhost:8443/users" ,
                    dataType : 'json',
                    data : JSON.stringify(formData),
                    success: function(result){
                        $("#divResult").text("Your have entered: " + JSON.stringify(result));
                    },
                    error : function(xhr, errorType, exception) {
                        var responseText;
                        $("#dialog").html("");
                        try {
                            responseText = jQuery.parseJSON(xhr.responseText);
                            $("#dialog").append("<div><b>" + errorType + " " + exception + "</b></div>");
                            $("#dialog").append("<div><u>Exception</u>:<br /><br />" + responseText.ExceptionType + "</div>");
                            $("#dialog").append("<div><u>StackTrace</u>:<br /><br />" + responseText.StackTrace + "</div>");
                            $("#dialog").append("<div><u>Message</u>:<br /><br />" + responseText.Message + "</div>");
                        } catch (e) {
                            responseText = xhr.responseText;
                            $("#dialog").html(responseText);
                        }
                        $("#dialog").dialog({
                            title: "jQuery Exception Details",
                            width: 700,
                            buttons: {
                                Close: function () {
                                    $(this).dialog('close');
                                }
                            }
                        });
                    }
                });
            }
        })
    </script>
</head>


<script>
    $( document ).ready(function() {

        // GET REQUEST
        $("#secondForm").submit(function(event){
            event.preventDefault();
            ajaxPost();
        });



        // DO POST
        function ajaxPost(){
            var userName =$("#user").val();
            $.ajax({
                type : "GET",
                contentType : 'application/json',
                url : "https://localhost:8443/" + userName ,
                success: function(result){
                    $("#divResultGet").text("The user has entered all these data: " + JSON.stringify(result));
                },
                error : function(xhr) {
                    var responseText;
                    $("#divResultGet").html("");
                    try {
                        responseText = jQuery.parseJSON(xhr.responseText);
                        $("#divResultGet").append("<div><u>Message</u>:<br /><br />" + responseText.message + "</div>");
                    } catch (e) {
                        responseText = xhr.responseText;
                        $("#divResultGet").html(responseText);
                    }
                }
            });
        }
    })
</script>
</head>
<body>
<!--
<div class="container-fluid">

    <div class="row">
        <div class="col-sm-4">

            <form>
                <fieldset>
                    <legend>User</legend>
                    <div class="form-group row">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputEmail1">Email address</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Password</label>
                        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                    </div>
                    <div class="form-group">
                        <label for="exampleSelect1">Example select</label>
                        <select class="form-control" id="exampleSelect1">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="exampleSelect2">Example multiple select</label>
                        <select multiple="" class="form-control" id="exampleSelect2">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="exampleTextarea">Example textarea</label>
                        <textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputFile">File input</label>
                        <input type="file" class="form-control-file" id="exampleInputFile" aria-describedby="fileHelp">
                        <small id="fileHelp" class="form-text text-muted">This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.</small>
                    </div>
                    <fieldset class="form-group">
                        <legend>Radio buttons</legend>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="option1" checked="">
                                Option one is this and that—be sure to include why it's great
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2">
                                Option two can be something else and selecting it will deselect option one
                            </label>
                        </div>
                        <div class="form-check disabled">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios3" value="option3" disabled="">
                                Option three is disabled
                            </label>
                        </div>
                    </fieldset>
                    <fieldset class="form-group">
                        <legend>Checkboxes</legend>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" value="" checked="">
                                Option one is this and that—be sure to include why it's great
                            </label>
                        </div>
                        <div class="form-check disabled">
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" value="" disabled="">
                                Option two is disabled
                            </label>
                        </div>
                    </fieldset>
                    <fieldset class="form-group">
                        <legend>Sliders</legend>
                        <label for="customRange1">Example range</label>
                        <input type="range" class="custom-range" id="customRange1">
                    </fieldset>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </fieldset>
            </form>
-->
<div class="container-fluid">

    <div class="row">
        <div class="col-sm-4">

            <form id="firstForm">
                <fieldset>
                    <legend>User</legend>
                    <div class="form-group row">
                    </div>
                        <div class="form-group">
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input type="text" class="form-control" id="username" placeholder="Enter your username">

                            <div class="form-group">
                                <label for="data">Info</label>
                                <input type="text" class="form-control" id="data" placeholder="Enter a text"/>
                            </div>

                                <div class="form-group">
                                    <label for="city">City</label>
                                    <input type="text" class="form-control" id="city" placeholder="Enter your city"/>
                                </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <div id="divResult"></div>
                            </div>
                        </div>
                </fieldset>

            </form>
            <form id="secondForm">
                <fieldset>
                    <legend>User Search</legend>
                    <div class="form-group row">
                    </div>
                    <div class="form-group">
                        <div class="form-group">
                            <label for="user">User</label>
                            <div class="form-group">
                                <input type="text" class="form-control" id="user" placeholder="Enter your user to get info">
                            </div>
                            <button type="submit" class="btn btn-primary">Search</button>
                            <div id="divResultGet"></div>
                        </div>
                    </div>
                </fieldset>

            </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>

